diff --git a/arch/x86/kvm/Makefile b/arch/x86/kvm/Makefile
index 5102fffb4807..98c5cd501bc4 100644
--- a/arch/x86/kvm/Makefile
+++ b/arch/x86/kvm/Makefile
@@ -50,9 +50,9 @@ pkvm-intel-$(CONFIG_PKVM_INTEL)	+= vmx/pkvm_init.o vmx/pkvm_host.o
 $(obj)/vmx/pkvm_init.o: $(obj)/pkvm_constants.h
 $(obj)/vmx/pkvm_host.o: $(obj)/pkvm_constants.h
 
-$(obj)/pkvm-constants.s: $(src)/pkvm/pkvm_constants.c FORCE
-	$(call if_changed_dep,cc_s_c)
-$(obj)/pkvm_constants.h: $(obj)/pkvm-constants.s FORCE
+#$(obj)/pkvm-constants.s: $(src)/pkvm/pkvm_constants.c FORCE
+#	$(call if_changed_dep,cc_s_c)
+$(obj)/pkvm_constants.h: $(obj)/pkvm-constants.S FORCE
 	$(call filechk,offsets,__PKVM_CONSTANTS_H__)
 CFLAGS_vmx/pkvm_init.o    := -iquote $(obj)
 CFLAGS_vmx/pkvm_host.o    := -iquote $(obj)
diff --git a/arch/x86/kvm/pkvm-constants.S b/arch/x86/kvm/pkvm-constants.S
new file mode 100644
index 000000000000..1172273164f8
--- /dev/null
+++ b/arch/x86/kvm/pkvm-constants.S
@@ -0,0 +1,73 @@
+	.file	"pkvm_constants.c"
+# GNU C11 (GCC) version 14.3.0 (x86_64-unknown-linux-gnu)
+#	compiled by GNU C version 14.3.0, GMP version 6.3.0, MPFR version 4.2.2, MPC version 1.3.1, isl version isl-0.20-GMP
+
+# GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
+# options passed: -mno-omit-leaf-frame-pointer -mno-sse -mno-mmx -mno-sse2 -mno-3dnow -mno-avx -m64 -mno-80387 -mno-fp-ret-in-387 -mpreferred-stack-boundary=3 -mskip-rax-setup -march=x86-64 -mtune=generic -mno-red-zone -mcmodel=kernel -mstack-protector-guard-reg=gs -mstack-protector-guard-symbol=__ref_stack_chk_guard -mindirect-branch=thunk-extern -mindirect-branch-register -mindirect-branch-cs-prefix -mfunction-return=thunk-extern -O2 -std=gnu11 -fshort-wchar -funsigned-char -fno-common -fno-PIE -fno-strict-aliasing -fcf-protection=branch -falign-jumps=1 -falign-loops=1 -fno-asynchronous-unwind-tables -fno-jump-tables -fpatchable-function-entry=16,16 -fno-delete-null-pointer-checks -fno-allow-store-data-races -fstack-protector-strong -fomit-frame-pointer -ftrivial-auto-var-init=zero -fno-stack-clash-protection -fmin-function-alignment=16 -fstrict-flex-arrays=3 -fno-strict-overflow -fstack-check=no -fconserve-stack -fno-builtin-wcslen
+	.text
+	.section	.text.startup,"ax",@progbits
+	.align 16
+	.globl	main
+	.section	__patchable_function_entries,"awo",@progbits,.LPFE6300
+	.align 8
+	.quad	.LPFE6300
+	.section	.text.startup
+.LPFE6300:
+	nop	
+	nop	
+	nop	
+	nop	
+	nop	
+	nop	
+	nop	
+	nop	
+	nop	
+	nop	
+	nop	
+	nop	
+	nop	
+	nop	
+	nop	
+	nop	
+	.type	main, @function
+main:
+	endbr64	
+# ../arch/x86/kvm/pkvm/pkvm_constants.c:10: 	DEFINE(PKVM_VMEMMAP_ENTRY_SIZE, sizeof(struct pkvm_page));
+#APP
+# 10 "../arch/x86/kvm/pkvm/pkvm_constants.c" 1
+	
+.ascii "->PKVM_VMEMMAP_ENTRY_SIZE $8 sizeof(struct pkvm_page)"	#
+# 0 "" 2
+# ../arch/x86/kvm/pkvm/pkvm_constants.c:11: 	DEFINE(PKVM_VMX_VM_SIZE, PKVM_VM_BASE_SIZE + sizeof(struct kvm_vmx));
+# 11 "../arch/x86/kvm/pkvm/pkvm_constants.c" 1
+	
+.ascii "->PKVM_VMX_VM_SIZE $51344 PKVM_VM_BASE_SIZE + sizeof(struct kvm_vmx)"	#
+# 0 "" 2
+# ../arch/x86/kvm/pkvm/pkvm_constants.c:12: 	DEFINE(PKVM_VMX_VCPU_SIZE, PKVM_VCPU_BASE_SIZE + sizeof(struct vcpu_vmx) +
+# 12 "../arch/x86/kvm/pkvm/pkvm_constants.c" 1
+	
+.ascii "->PKVM_VMX_VCPU_SIZE $9752 PKVM_VCPU_BASE_SIZE + sizeof(struct vcpu_vmx) + KVM_MCE_SIZE + KVM_MCI_CTL2_SIZE"	#
+# 0 "" 2
+# ../arch/x86/kvm/pkvm/pkvm_constants.c:15: }
+#NO_APP
+	xorl	%eax, %eax	#
+	jmp	__x86_return_thunk
+	.size	main, .-main
+	.ident	"GCC: (GNU) 14.3.0"
+	.section	.note.GNU-stack,"",@progbits
+	.section	.note.gnu.property,"a"
+	.align 8
+	.long	1f - 0f
+	.long	4f - 1f
+	.long	5
+0:
+	.string	"GNU"
+1:
+	.align 8
+	.long	0xc0000002
+	.long	3f - 2f
+2:
+	.long	0x1
+3:
+	.align 8
+4:
